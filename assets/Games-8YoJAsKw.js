import{r as d,j as e}from"./index-8MTCQHXL.js";const q=({rotation:u})=>e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 100 300",style:{transform:`rotate(${u}deg)`,transition:"transform 4.5s cubic-bezier(0.33, 1, 0.68, 1)"},className:"h-40 w-auto text-deep-tea-brown drop-shadow-lg z-10",children:[e.jsx("path",{d:"M30,300 L30,120 C30,100 70,100 70,120 L70,300 Z",fill:"currentColor"}),e.jsx("path",{d:"M40,120 L40,40 C40,20 60,20 60,40 L60,120 Z",fill:"currentColor"}),e.jsx("rect",{x:"35",y:"10",width:"30",height:"15",rx:"5",fill:"currentColor"}),e.jsx("path",{d:"M38,280 L38,130 C45,150 45,250 38,280 Z",fill:"white",fillOpacity:"0.3"})]}),Z=()=>{const[u,g]=d.useState("select"),[h,C]=d.useState(0),[o,y]=d.useState([]),[b,j]=d.useState(""),[D,P]=d.useState(0),[f,S]=d.useState(!1),[I,N]=d.useState(null),[F,A]=d.useState(null),[v,p]=d.useState(""),E=d.useMemo(()=>o.length>0&&o.every(t=>t.trim()!=="")&&b.trim()!=="",[o,b]),G=t=>{C(t),y(Array(t).fill("")),g("setup"),p("")},z=(t,n)=>{const a=[...o];a[t]=n,y(a),v&&p("")},B=()=>{if(!E){p("Please enter all player names and set a challenge.");return}p(""),g("play")},k=()=>{if(f)return;S(!0),N(null),A(null);const t=Math.floor(Math.random()*5)+5,n=Math.floor(Math.random()*360),a=D+t*360+n;P(a),setTimeout(()=>{const r=360/h,s=a%360;let c;h===2?c=(s+180)%360:c=s;const i=360-r/2;let x=(c-i+360)%360,l=Math.floor(x/r)%h;console.log(`[${h} players] Bottle rotation: ${s.toFixed(1)}°, ${h===2?"BASE":"CAP"} points to: ${c.toFixed(1)}°, gradient space: ${x.toFixed(1)}°, player index: ${l}, winner: ${o[l]}`),N(o[l]),A(l),S(!1)},4500)},T=()=>{g("select"),C(0),y([]),j(""),P(0),S(!1),N(null),A(null),p("")},L=()=>{switch(u){case"select":return e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"text-charcoal-gray mb-6 text-lg",children:"How many friends are playing?"}),e.jsx("div",{className:"grid grid-cols-3 gap-4 max-w-xs mx-auto",children:[2,3,4,5,6].map(t=>e.jsx("button",{onClick:()=>G(t),className:"w-20 h-20 mx-auto bg-button-cream text-deep-tea-brown font-bold text-3xl rounded-full shadow-md hover:bg-opacity-80 hover:scale-110 transition-all duration-200",children:t},t))})]});case"setup":return e.jsxs("div",{className:"text-left",children:[e.jsx("h4",{className:"text-lg font-semibold text-deep-tea-brown mb-3",children:"1. Enter Player Names"}),e.jsx("div",{className:"space-y-3 mb-6",children:o.map((t,n)=>e.jsx("input",{type:"text",placeholder:`Player ${n+1}`,value:o[n],onChange:a=>z(n,a.target.value),className:"w-full px-4 py-2.5 bg-white border-2 border-button-cream rounded-lg focus:outline-none focus:ring-2 focus:ring-deep-tea-brown transition"},n))}),e.jsx("h4",{className:"text-lg font-semibold text-deep-tea-brown mb-3",children:"2. Set the Challenge"}),e.jsx("p",{className:"text-sm text-charcoal-gray mb-3",children:"What does the chosen player have to do?"}),e.jsx("input",{type:"text",placeholder:"e.g., Pay for the next round",value:b,onChange:t=>j(t.target.value),className:"w-full px-4 py-2.5 bg-white border-2 border-button-cream rounded-lg focus:outline-none focus:ring-2 focus:ring-deep-tea-brown transition"}),e.jsx("div",{className:"flex flex-wrap gap-2 justify-center mt-4 mb-6",children:["Pay the bill","Truth or dare","Sing a song"].map(t=>e.jsx("button",{onClick:()=>j(t),className:"bg-button-cream text-deep-tea-brown text-sm font-semibold py-1.5 px-3 rounded-full hover:bg-opacity-80 transition",children:t},t))}),v&&e.jsx("p",{className:"text-red-500 text-sm mb-4 text-center",children:v}),e.jsxs("div",{className:"text-center",children:[e.jsx("button",{onClick:B,disabled:!E,className:"w-full bg-deep-tea-brown text-white font-bold py-3 rounded-lg shadow-md hover:bg-opacity-90 transition-all disabled:bg-gray-400 disabled:cursor-not-allowed active:scale-95",children:"Let's Play!"}),e.jsx("button",{onClick:()=>g("select"),className:"text-sm text-charcoal-gray mt-4 hover:underline",children:"Back"})]})]});default:return null}};if(u!=="play")return e.jsxs("div",{className:"bg-light-cream p-6 rounded-2xl shadow-md",children:[e.jsx("h3",{className:"text-xl font-semibold text-deep-tea-brown mb-4 text-center",children:"Spin the Bottle Setup"}),L()]});const m=360/h,$=360-m/2,R=["#D4A373","#FAEDCD","#FEFAE0","#E9EDC9","#CCD5AE","#A2A88A"],_=1.5,O=(t,n)=>{const i=125*(360/n*(Math.PI/180))*.8/((t.length||1)*.6);let l=Math.min(24,i);return l=Math.max(l,10),{fontSize:l}},M=(t,n,a,r)=>{const s=(r-90)*Math.PI/180;return{x:t+a*Math.cos(s),y:n+a*Math.sin(s)}},U=(t,n,a,r,s,c)=>{const i=M(t,n,a,s),x=M(t,n,a,r),l=s-r<=180?"0":"1",w=c?"0":"1";return c?`M ${x.x} ${x.y} A ${a} ${a} 0 ${l} ${w} ${i.x} ${i.y}`:`M ${i.x} ${i.y} A ${a} ${a} 0 ${l} ${w} ${x.x} ${x.y}`};return e.jsxs("div",{className:"flex flex-col items-center gap-6 p-4 bg-light-cream rounded-2xl shadow-inner",children:[e.jsxs("div",{className:"w-full max-w-xs aspect-square rounded-full relative border-8 border-deep-tea-brown shadow-[inset_0_0_15px_rgba(0,0,0,0.1)] flex justify-center items-center overflow-hidden",style:{background:`conic-gradient(from ${$}deg, ${o.map((t,n)=>`${R[n%R.length]} ${n*m+_/2}deg ${(n+1)*m-_/2}deg`).join(", ")})`},children:[e.jsx(q,{rotation:D}),e.jsxs("svg",{viewBox:"-150 -150 300 300",className:"absolute top-0 left-0 w-full h-full pointer-events-none",children:[e.jsx("defs",{children:o.map((t,n)=>{const s=m*.1,c=$+n*m+s,i=$+(n+1)*m-s,l=((c+i)/2%360+360)%360,w=l>90&&l<270,W=U(0,0,125,c,i,w);return e.jsx("path",{id:`player-path-${n}`,d:W,fill:"none"},n)})}),o.map((t,n)=>{const a=F===n,r=`player-path-${n}`,{fontSize:s}=O(t,h);return e.jsx("text",{className:`transition-all duration-500 fill-current ${a?"text-amber-900 font-extrabold":"text-deep-tea-brown font-semibold"}`,style:{fontSize:a?s*1.3:s,textShadow:a?"0 0 12px rgba(255, 223, 128, 1), 0 0 5px rgba(0,0,0,0.5)":"0 1px 1px rgba(255,255,255,0.4)"},children:e.jsx("textPath",{href:`#${r}`,startOffset:"50%",textAnchor:"middle",children:t})},n)})]})]}),e.jsx("div",{className:"text-center h-24 flex flex-col justify-center items-center px-2",children:I&&!f&&e.jsxs("div",{className:"animate-bounce",children:[e.jsxs("p",{className:"text-2xl font-bold text-deep-tea-brown",children:["Congratulations, ",I,"!"]}),e.jsxs("p",{className:"text-xl text-charcoal-gray mt-1 break-words",children:["You have to: ",e.jsx("span",{className:"font-semibold",children:b})]})]})}),e.jsxs("div",{className:"w-full flex flex-col items-center gap-4",children:[e.jsx("button",{onClick:k,disabled:f,className:"w-full max-w-xs bg-deep-tea-brown text-white font-bold py-4 px-10 text-xl rounded-lg shadow-md hover:bg-opacity-90 active:scale-95 transition-all disabled:bg-gray-400 disabled:cursor-not-allowed",children:f?"Spinning...":"Spin the Bottle!"}),e.jsx("button",{onClick:T,className:"text-sm text-charcoal-gray hover:underline",children:"Start a New Game"})]})]})},V=()=>e.jsxs("div",{className:"p-4",children:[e.jsx("h2",{className:"text-2xl font-bold text-deep-tea-brown mb-4 text-center",children:"Game Time!"}),e.jsx(Z,{})]});export{V as default};
